function getNodeByText(str) {
  return $('*').contents().filter(
    function() {
      return this.wholeText && this.wholeText.indexOf(str) >= 0
    }).parent();
}

function getNodeWithDate() {
  return $('*').contents().filter(
    function() {
      //ATENÇÃO! SE MUDAR A REGEX NO C#, TENHO QUE ATUALIZAR AQUI!!!
        var pattern = /((([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*( - | -|- |-| – | –|– |–| to | and | a )([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)(\d{4}|\d{2}))|((1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*( - | -|- |-| – | –|– |–| to | and | a )([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(\d{4}|\d{2}))|((\d{4}|\d{2})(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*( - | -|- |-| – | –|– |–| to | and | a )([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?))|((\d{4}|\d{2})(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*( - | -|- |-| – | –|– |–| to | and | a )([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*)|(([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)( - | -|- |-| – | –|– |–| to | and | a )([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)(\d{4}|\d{2}))|((1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*( - | -|- |-| – | –|– |–| to | and | a )(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(\d{4}|\d{2}))|((\d{4}|\d{2})(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)( - | -|- |-| – | –|– |–| to | and | a )([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?))|((\d{4}|\d{2})(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*( - | -|- |-| – | –|– |–| to | and | a )(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*)|(([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*( - | -|- |-| – | –|– |–| to | and | a )([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?))|((1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*( - | -|- |-| – | –|– |–| to | and | a )([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*))|((([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)(\d{4}|\d{2}))|((1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(\d{4}|\d{2}))|((\d{4}|\d{2})(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?))|((\d{4}|\d{2})(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*)|(([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*(, |\.|-| de |\/|\s+)(1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?))|((1[0-2]|[1-9]|0[1-9]|january|february|march|april|may|june|july|august|september|october|november|december|jan\.?|feb\.?|mar\.?|apr\.?|may\.?|jun\.?|jul\.?|aug\.?|sep\.?|oct\.?|nov\.?|dec\.?|janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro|jan\.?|fev\.?|mar\.?|abr\.?|mai\.?|jun\.?|jul\.?|ago\.?|set\.?|out\.?|nov\.?|dez\.?)(, |\.|-| de |\/|\s+)([1-2]\d|3[0-1]|0?[1-9])(st|nd|rd|th)*))/i;
      //------
      return this.wholeText && pattern.test(this.wholeText);
    }).parent();
}

function getNodeWithPattern(str) {
  return $('*').contents().filter(
    function() {
      var pattern = new RegExp(str, 'i');
      return this.wholeText && pattern.test(this.wholeText);
    }).parent();
}

function test(t)
{
  console.log('teste GenericFunctions: ' + t);
}

// usando try, pois o arquivo é executado via eval
// neste caso dá erro neste trecho, porém neste caso também não faz falta
// já se o arquivo for utilizado via require, este trecho é necessário
try {
  module.exports = {
    getNodeByText: getNodeByText,
    getNodeWithDate: getNodeWithDate,
    getNodeWithPattern: getNodeWithPattern,
    test: test
  }
}
catch(e){}
